<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- <link rel="stylesheet" href="./assets/fontawesome/css/all.min.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Memuat jQuery dari CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>RANKING 1 - GMIT YEGAR SAHADUTA OSMO 2024</title>
    <style>
        #demo {
            text-align: center;
            font-size: 60px;
            margin-top: 0px;
        }

        .timer {
            font-family: sans-serif;
            display: inline-block;
            padding: 24px 32px;
            border-radius: 30px;
            background: white;
        }

        .timer__part {
            font-size: 36px;
            font-weight: bold;
        }

        .timer__btn {
            width: 50px;
            height: 50px;
            margin-left: 16px;
            border-radius: 50%;
            border: none;
            color: white;
            background: #8208e6;
            cursor: pointer;
        }

        .timer__btn--start {
            background: #00b84c;
        }

        .timer__btn--stop {
            background: #ff0256;
        }

        .hidden {
            display: none;
        }
    </style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <div class="container mt-4 mb-5">
        <div class="card text-center">
            <div class="card-header">
                <div class="row">
                    <div class="">
                        <a href="./index.html" class="btn btn-success">
                            Daftar Soal
                        </a>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <h1 class="m-5" style="font-size: 80pt; font-weight: bolder;" id="Soal"></h1>
                <button class="btn btn-warning" id="btnSpeak"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
                    <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                  </svg></button>
                <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal"
                    id="btnShowAnswer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
                        <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7 7 0 0 0-2.79.588l.77.771A6 6 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755q-.247.248-.517.486z"/>
                        <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829"/>
                        <path d="M3.35 5.47q-.27.24-.518.487A13 13 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7 7 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12z"/>
                      </svg></button>
                <button class="btn btn-primary" id="btnNext"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-right-circle" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/>
                  </svg></button>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Jawaban</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center">
                        <h1 id="Jawaban" style="display: none; font-size: 80pt; font-weight: bolder;"></h1>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-warning" id="btnSpeakAns"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
                        <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                      </svg></button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                        <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                      </svg></button>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const scriptURLGet =
        "https://script.google.com/macros/s/AKfycbxzwPC3S2XM0jt9m4JEsJugUsHJSrEo9cY7BK-vfYvRV3lKtV0WW6t8vEA-1gaYWR-u/exec";
    const namaTim = document.getElementById("nama-tim");
    const poin = document.getElementById("poin");
    const ID = document.getElementById("ID");
    const pSoal = document.getElementById("Soal");
    const pJawaban = document.getElementById("Jawaban");
    const btnNext = document.getElementById("btnNext");
    const btnShowAnswer = document.getElementById("btnShowAnswer");
    const btnSpeakAns = document.getElementById("btnSpeakAns");
    const btnSpeak = document.getElementById("btnSpeak");
    let dataSoal = []; // Variabel untuk menyimpan data soal
    let currentIndex = 0; // Variabel untuk mengikuti indeks soal yang sedang ditampilkan

    // Fungsi untuk menampilkan soal berikutnya
    function showNextSoal() {
        if (currentIndex < dataSoal.length - 1) {
            currentIndex++;
            pSoal.innerText = dataSoal[currentIndex].Soal;
            pJawaban.style.display = "none"; // Sembunyikan jawaban setelah menampilkan soal baru
        } else {
            alert("Anda telah mencapai akhir daftar soal.");
        }
    }


    // Fungsi untuk membaca teks menggunakan SpeechSynthesis
    function speakText(text) {
        const synth = window.speechSynthesis;
        const utterance = new SpeechSynthesisUtterance(text);
        // Set bahasa menjadi Bahasa Indonesia
        utterance.lang = 'id-ID';

        // Pilih suara laki-laki
        utterance.voiceURI = 'Google Bahasa Indonesia (Indonesia)';

        synth.speak(utterance);
        utterance.onend = function (event) {
            btnSpeak.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
                <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                </svg>`; // Change button text back
            btnSpeak.disabled = false; // Re-enable the button
            btnSpeakAns.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
                <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                </svg>`; // Change button text back
            btnSpeakAns.disabled = false; // Re-enable the button
        };
    }

    // Event listener untuk tombol Bacakan
    btnSpeak.addEventListener("click", function () {
        var btn = document.getElementById("btnSpeak");
        const textToSpeak = pSoal.innerText;
        btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-soundwave" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8.5 2a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5m-2 2a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5m4 0a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5m-6 1.5A.5.5 0 0 1 5 6v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m8 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m-10 1A.5.5 0 0 1 3 7v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5m12 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5"/>
                        </svg>`;
        btn.disabled = true; // Optional: Disable the button after changing the icon
        speakText(textToSpeak);
    });
    // Event listener untuk tombol Bacakan
    btnSpeakAns.addEventListener("click", function () {
        var btn = document.getElementById("btnSpeakAns");
        const textToSpeak = pJawaban.innerText;
        btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-soundwave" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8.5 2a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5m-2 2a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5m4 0a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5m-6 1.5A.5.5 0 0 1 5 6v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m8 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m-10 1A.5.5 0 0 1 3 7v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5m12 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5"/>
                        </svg>`;
        btn.disabled = true; // Optional: Disable the button after changing the icon
        speakText(textToSpeak);
    });

    // Fungsi untuk menampilkan jawaban
    function showAnswer() {
        if (dataSoal.length > 0) {
            pJawaban.innerText = dataSoal[currentIndex].Jawaban;
            pJawaban.style.display = "block"; // Tampilkan jawaban
        } else {
            alert("Belum ada soal yang dimuat.");
        }
    }

    // Event listener untuk tombol Next Soal
    btnNext.addEventListener("click", showNextSoal);

    // Event listener untuk tombol Tampilkan Jawaban
    btnShowAnswer.addEventListener("click", showAnswer);

    // ===============================================
    // ==================== Tampilkan data =================
    // ===============================================

    fetch(scriptURLGet, {
        method: "GET", // Menggunakan metode GET untuk mengambil data
    })
        .then((response) => response.json())
        .then((data) => {
            if (data.length > 0) {
                dataSoal = data; // Simpan data soal ke dalam variabel dataSoal
                pSoal.innerText = dataSoal[currentIndex].Soal; // Tampilkan soal pertama
                console.log(data)
            } else {
                alert("Tidak ada data soal yang dimuat.");
            }
        })
        .catch((error) => console.error("Error!", error.message));
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></script>

</html>
